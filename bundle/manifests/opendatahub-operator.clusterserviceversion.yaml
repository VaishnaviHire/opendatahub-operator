apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |- 
      [
        {
          "apiVersion": "dashboard.opendatahub.io/v1",
          "kind": "OdhApplication",
          "metadata": {
            "name": "jupyter",
            "annotations": {
              "opendatahub.io/categories": "Model development,Model training,Notebook environments"
            }
          },
          "spec": {
            "img": "",
            "getStartedLink": "https://jupyterlab.readthedocs.io/en/stable/getting_started/overview.html",
            "internalRoute": "notebookController",
            "displayName": "Jupyter",
            "kfdefApplications": [
              "odh-notebook-controller",
              "notebook-images"
            ],
            "support": "red hat",
            "provider": "Jupyter",
            "docsLink": "https://jupyter.org",
            "quickStart": "create-jupyter-notebook",
            "getStartedMarkDown": "",
            "description": "A multi-user version of the notebook designed for companies, classrooms and research labs.",
            "category": "Red Hat managed"
          }
        },
        {
          "apiVersion": "dashboard.opendatahub.io/v1",
          "kind": "OdhDocument",
          "metadata": {
            "name": "jupyterhub-install-python-packages",
            "annotations": {
              "opendatahub.io/categories": "Package management,Notebook environments,Getting started"
            }
          },
          "spec": {
            "displayName": "How to install Python packages on your notebook server",
            "appName": "jupyter",
            "type": "how-to",
            "description": "Install additional python packages into your notebook server.",
            "url": "https://access.redhat.com/documentation/en-us/red_hat_openshift_data_science/1/html-single/how_to_install_python_packages_on_your_notebook_server/index",
            "durationMinutes": 15
          }
        },
        {
          "apiVersion": "opendatahub.io/v1alpha",
          "kind": "OdhDashboardConfig",
          "metadata": {
            "creationTimestamp": null,
            "name": "odh-dashboard-config"
          },
          "spec": {
            "dashboardConfig": {
              "disableBYONImageStream": false,
              "disableClusterManager": false,
              "disableISVBadges": false,
              "disableInfo": false,
              "disableSupport": false,
              "disableTracking": true,
              "enablement": true
            },
            "notebookController": {
              "enabled": true
            },
            "notebookSizes": [
              {
                "name": "Small",
                "resources": {
                  "limits": {
                    "cpu": "2",
                    "memory": "2Gi"
                  },
                  "requests": {
                    "cpu": "1",
                    "memory": "1Gi"
                  }
                }
              },
              {
                "name": "Medium",
                "resources": {
                  "limits": {
                    "cpu": "4",
                    "memory": "4Gi"
                  },
                  "requests": {
                    "cpu": "2",
                    "memory": "2Gi"
                  }
                }
              },
              {
                "name": "Large",
                "resources": {
                  "limits": {
                    "cpu": "8",
                    "memory": "8Gi"
                  },
                  "requests": {
                    "cpu": "4",
                    "memory": "4Gi"
                  }
                }
              }
            ],
            "groupsConfig": {
              "adminGroups": "odh-admins",
              "allowedGroups": "system:authenticated"
            }
          }
        },
        {
          "apiVersion": "kfdef.apps.kubeflow.org/v1",
          "kind": "KfDef",
          "metadata": {
            "name": "odh-core"
          },
          "spec": {
            "applications": [
              {
                "kustomizeConfig": {
                  "repoRef": {
                    "name": "manifests",
                    "path": "odh-common"
                  }
                },
                "name": "odh-common"
              }
            ],
            "repos": [
              {
                "name": "manifests",
                "uri": "https://github.com/opendatahub-io/odh-manifests/tarball/master"
              }
            ],
            "version": "master"
          }
        },
        {
          "apiVersion": "console.openshift.io/v1",
          "kind": "OdhQuickStart",
          "metadata": {
            "name": "deploy-python-model",
            "annotations": {
              "opendatahub.io/categories": "Model serving,Getting started"
            }
          },
          "spec": {
            "displayName": "Deploying a sample Python application using Flask and OpenShift.",
            "appName": "jupyterhub",
            "durationMinutes": 10,
            "icon": "images/jupyterhub.svg",
            "description": "How to deploy a Python model using Flask and OpenShift.",
            "prerequisites": [
              "You completed the \"Create a Jupyter notebook\" quick start."
            ],
            "introduction": "### This quick start shows you how to deploy a Python model.\nOpen Data Hub lets you run Jupyter notebooks in a scalable OpenShift hybrid cloud environment.\nThis quick start shows you how to take your model out of a Jupyter notebook and put it into a Flask application running on OpenShift Dedicated, for use as a development sandbox.",
            "tasks": [
              {
                "title": "Create a new GitHub repository using the s2i Flask template",
                "description": "### To create a new repository from the s2i Flask template:\n1. Navigate to `https://github.com/opendatahub-io/odh-s2i-project-simple`.\n2. Click **Use this template** to create a new repository from this template.\n3. Enter a *Repository name* for your new repository.\n4. Select the **Public** radio button to ensure the repository is visible.\n5. Click **Create repository from template** to complete this step.\nA new GitHub repository will be created under **Your repositories** on GitHub.",
                "review": {
                  "instructions": "#### To verify you have create a new repository:\nIs a new GitHub repository visible with the name you entered?",
                  "failedTaskHelp": "This task is not verified yet. Try the task again."
                },
                "summary": {
                  "success": "You have created a new GitHub repository.",
                  "failed": "Try the steps again."
                }
              },
              {
                "title": "Deploy the sample Flask Python model",
                "description": "### Deploying the sample Flask application on OpenShift:\n1. Click the **code** button from your newly created repository and copy the URL for your project.\n2. Navigate to your OpenShift Dedicated web console and ensure you are in the **Developer** perspective.\n3. Use the **Project** dropdown to select your OpenShift project, or create a new one.\n4. Click **+Add**.\n5. Click on the **From Git** card.\n6. Paste the URL for your project (copied in step 1) into the **Git Repo URL** field. This automatically fills in some of the other fields on the page.\n7. Under **Builder Image**, click **Python**.\n8. Click **Create** and watch the deployment build and start in the Topology view.\nThe application will deploy and indicate that the system is running.",
                "review": {
                  "instructions": "#### To verify that you have deployed the Flask Python model:\nClick on the application in the Topology view and check under **Builds** in the panel that appears. You should see something like `Build #1 is complete (a minute ago)` alongside a green check mark.",
                  "failedTaskHelp": "This task is not verified yet. Try the task again."
                },
                "summary": {
                  "success": "The deployed application has started.",
                  "failed": "Try the steps again."
                }
              },
              {
                "title": "Test the prediction function in the deployed model",
                "description": "### To test the sample Flask application:\n1. Click the application in the Topology view.\n2. In the panel that appears, copy the URL that appears under **Routes**.\n3. In a Jupyter notebook, navigate to a terminal view.\n4. Run this curl command, using the URL you copied in step 1.\n```\ncurl -X POST -d '{\"hello\" \":\" \"world\"}' <URL>/prediction\n```\nFor example:\n```\ncurl -X POST -d '{\"hello\" \":\" \"world\"}' http://example.apps.organization.abc3.p4.openshiftapps.com/prediction\n```\nThis should return `{\"prediction\":\"not implemented\"}` as output.",
                "review": {
                  "instructions": "#### Verify that your deployed application is working:\nDid you receive the response `{\"prediction\" '':'' \"not implemented\"}`?",
                  "failedTaskHelp": "This task is not verified yet. Make sure your application built correctly. Make sure you remembered to add `/prediction` to the end of the application URL to get to the endpoint."
                },
                "summary": {
                  "success": "You have verified that the sample model deployment is executing!",
                  "failed": "Try the steps again."
                }
              }
            ],
            "conclusion": "You are now able to deploy a sample model stored in GitHub.",
            "nextQuickStart": []
          }
        }
      ]
    capabilities: Basic Install
    createdAt: "2023-01-24T09:14:07Z"
    operators.operatorframework.io/builder: operator-sdk-v1.26.0
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v3
  name: opendatahub-operator.v0.0.1
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - description: KfDef is the Schema for the kfdefs API
      displayName: Kf Def
      kind: KfDef
      name: kfdefs.kfdef.apps.kubeflow.org
      version: v1
      resources: []
      specDescriptors:
        - path: applications
          displayName: Applications
          description: Application defines an application to install
        - path: repos
          displayName: Repositories
          description: Repo provides information about a repository providing
                    config (e.g. kustomize packages, Deployment manager configs, etc...)
        - path: version
          displayName: Version
          description: Describes the version of the KfDef
      statusDescriptors:
        - path: conditions
          displayName: Conditions
          description: Contains the conditions and transitions of the KfDef as well as their details and timing.
        - path: reposCache
          displayName: Repositories Cache
          description: ReposCache is used to cache information about local caching
                  of the URIs.
    - kind: OdhApplication
      name: odhapplications.dashboard.opendatahub.io
      version: v1
      resources: []
      specDescriptors:
        - path: description
          displayName: Description
          description: The description of the ODH application.
        - path: displayName
          displayName: Display Name
          description: The application name as it is shown in the ODH Dashboard.
        - path: docsLink
          displayName: Documentation Link
          description: A link to additional documentation of the application.
        - path: getStartedLink
          displayName: Get Started Link
          description: A link to the getting started page of the application.
        - path: getStartedMarkDown
          displayName: Get Started Markdown
          description: Markdown text describing the getting started process.
        - path: img
          displayName: Thumbnail Image
          description: Thumbnail image of the application as displayed in the ODH Dashboard.
        - path: provider
          displayName: Provider
          description: String containing the provider of the application.
        - path: support
          displayName: Support
          description: String describing the provider of support available for the application
        - path: internalRoute
          displayName: Internal Route
          description: The route to the application if it is within the dashboard api.
        - path: category
          displayName: Category
          description: The category of the application.
        - path: kfdefApplications
          displayName: KfDef Applications
          description: The resources that ODH Dashboard should watch to determine whether the application is running.
        - path: quickStart
          displayName: Quick Start
          description: The name of the quickstart custom resource that contains relevant quick start information for the application.
      statusDescriptors:
        - path: enabled
          displayName: Enabled
          description: Enabled shows whether the application is enabled or not.
    - kind: OdhDashboardConfig
      name: odhdashboardconfigs.opendatahub.io
      version: v1alpha
      resources: []
      specDescriptors:
        - path: dashboardConfig
          displayName: Dashboard Configuration
          description: dashboardConfig contains options to enable and disable functions of ODH Dashboard
        - path: groupsConfig
          displayName: User Group Configuration
          description: groupsConfig stores the admin and allowed user groups.
        - path: notebookController
          displayName: Notebook Controller Configuration
          description: notebookController contains the configuration of some notebook controller functions.
        - path: notebookSizes
          displayName: Notebook Sizes Configuration
          description: notebookSizes contains the available notebook sizes as displayed in the ODH Dashboard.   
      statusDescriptors: []
    - kind: OdhDocument
      name: odhdocuments.dashboard.opendatahub.io
      version: v1
      resources: []
      specDescriptors:
        - path: description
          description: The description of the document.
          displayName: Description
        - path: displayName
          description: The display name of the document as shown in ODH Dashboard.
          displayName: Display Name
        - path: durationMinutes
          displayName: Duration in Minutes
          description: Approximate amount of minutes the document takes to read.
        - path: type
          displayName: Type
          description: Document type (eg. how-to, ...)
        - path: url
          displayName: URL
          description: The link to the documentation used by ODH Dashboard.
        - path: appName
          displayName: Application Name
          description: The name of the application the document is related to.
      statusDescriptors:
        - path: enabled
          displayName: Enabled
          description: Stores whether the document is enabled or not.
    - kind: OdhQuickStart
      name: odhquickstarts.console.openshift.io
      version: v1
      resources: []
      specDescriptors:
        - path: appName
          displayName: Application Name
          description: the name/id of the odh application the quick start pertains
                  to
        - path: icon
          displayName: Icon 
          description: icon is a base64 encoded image that will be displayed
                  beside the Quick Start display name. The icon should be an vector
                  image for easy scaling. The size of the icon should be 40x40.
        - path: prerequisites
          displayName: Prerequisites
          description: prerequisites contains all prerequisites that need to
                  be met before taking a Quick Start. (includes markdown)
        - path: conclusion
          displayName: Conclusion
          description: conclusion sums up the Quick Start and suggests the possible
                  next steps. (includes markdown)
        - path: nextQuickStart
          displayName: Next Quick Start
          description: nextQuickStart is a list of the following Quick Starts,
                  suggested for the user to try.
        - path: description
          displayName: Description
          description: description is the description of the Quick Start. (includes markdown)
        - path: displayName
          displayName: Display Name
          description: displayName is the display name of the Quick Start.
        - path: durationMinutes
          displayName: Duration in Minutes
          description: durationMinutes describes approximately how many minutes
                  it will take to complete the Quick Start.
        - path: introduction
          displayName: Introduction
          description: introduction describes the purpose of the Quick Start.
                  (includes markdown)
        - path: tasks
          displayName: Tasks
          description: tasks is the list of steps the user has to perform to
                  complete the Quick Start.
      statusDescriptors: []
  description: The Open Data Hub is a machine-learning-as-a-service platform built
    on Red Hat's Kubernetes-based OpenShift® Container Platform. Open Data Hub integrates
    multiple AI/ML open source components into one operator that can easily be downloaded
    and installed by OpenShift users.
  displayName: Open Data Hub Operator
  icon:
  - base64data: ""
    mediatype: ""
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - '*'
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - authentication.k8s.io
          resources:
          - tokenreviews
          verbs:
          - create
        - apiGroups:
          - authorization.k8s.io
          resources:
          - subjectaccessreviews
          verbs:
          - create
        serviceAccountName: opendatahub-operator-controller-manager
      deployments:
      - label:
          control-plane: controller-manager
        name: opendatahub-operator-controller-manager
        spec:
          replicas: 1
          selector:
            matchLabels:
              control-plane: controller-manager
          strategy: {}
          template:
            metadata:
              annotations:
                kubectl.kubernetes.io/default-container: manager
              labels:
                control-plane: controller-manager
            spec:
              containers:
              - args:
                - --secure-listen-address=0.0.0.0:8443
                - --upstream=http://127.0.0.1:8080/
                - --logtostderr=true
                - --v=0
                image: gcr.io/kubebuilder/kube-rbac-proxy:v0.13.0
                name: kube-rbac-proxy
                ports:
                - containerPort: 8443
                  name: https
                  protocol: TCP
                resources:
                  limits:
                    cpu: 500m
                    memory: 128Mi
                  requests:
                    cpu: 5m
                    memory: 64Mi
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - ALL
              - args:
                - --health-probe-bind-address=:8081
                - --metrics-bind-address=127.0.0.1:8080
                - --leader-elect
                command:
                - /manager
                image: quay.io/opendatahub/opendatahub-operator:dev-1.0.1
                livenessProbe:
                  httpGet:
                    path: /healthz
                    port: 8081
                  initialDelaySeconds: 15
                  periodSeconds: 20
                name: manager
                readinessProbe:
                  httpGet:
                    path: /readyz
                    port: 8081
                  initialDelaySeconds: 5
                  periodSeconds: 10
                resources: {}
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - ALL
              securityContext:
                runAsNonRoot: true
              serviceAccountName: opendatahub-operator-controller-manager
              terminationGracePeriodSeconds: 10
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
        serviceAccountName: opendatahub-operator-controller-manager
    strategy: deployment
  installModes:
  - supported: false
    type: OwnNamespace
  - supported: false
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: true
    type: AllNamespaces
  keywords:
  - '### Components'
  links:
  - name: Opendatahub Operator
    url: https://opendatahub-operator.domain
  maturity: alpha
  provider:
    name: Open Data Hub operator allows users to install and manage components of
      the Open Data Hub. Users can mix and match tools from each project to fulfill
      the needs of their use case. Each of the
    url: projects share some components, but can be mostly seen as an extension of
      each other to provide a complete solution for both novice and skilled enterprise
      users.
  version: 0.0.1
